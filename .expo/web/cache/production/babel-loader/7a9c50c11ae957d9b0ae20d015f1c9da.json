{"ast":null,"code":"import{canUseDOM}from'fbjs/lib/ExecutionEnvironment';import createEventHandle from\"../createEventHandle\";var supportsPointerEvent=function supportsPointerEvent(){return!!(typeof window!=='undefined'&&window.PointerEvent!=null);};var activeModality='keyboard';var modality='keyboard';var previousModality;var previousActiveModality;var isEmulatingMouseEvents=false;var listeners=new Set();var KEYBOARD='keyboard';var MOUSE='mouse';var TOUCH='touch';var BLUR='blur';var CONTEXTMENU='contextmenu';var FOCUS='focus';var KEYDOWN='keydown';var MOUSEDOWN='mousedown';var MOUSEMOVE='mousemove';var MOUSEUP='mouseup';var POINTERDOWN='pointerdown';var POINTERMOVE='pointermove';var SCROLL='scroll';var SELECTIONCHANGE='selectionchange';var TOUCHCANCEL='touchcancel';var TOUCHMOVE='touchmove';var TOUCHSTART='touchstart';var VISIBILITYCHANGE='visibilitychange';var bubbleOptions={passive:true};var captureOptions={capture:true,passive:true};var addBlurListener=createEventHandle(BLUR,bubbleOptions);var addFocusListener=createEventHandle(FOCUS,bubbleOptions);var addVisibilityChangeListener=createEventHandle(VISIBILITYCHANGE,captureOptions);var addKeyDownListener=createEventHandle(KEYDOWN,captureOptions);var addPointerDownListener=createEventHandle(POINTERDOWN,captureOptions);var addPointerMoveListener=createEventHandle(POINTERMOVE,captureOptions);var addContextMenuListener=createEventHandle(CONTEXTMENU,captureOptions);var addMouseDownListener=createEventHandle(MOUSEDOWN,captureOptions);var addMouseMoveListener=createEventHandle(MOUSEMOVE,captureOptions);var addMouseUpListener=createEventHandle(MOUSEUP,captureOptions);var addScrollListener=createEventHandle(SCROLL,captureOptions);var addSelectiomChangeListener=createEventHandle(SELECTIONCHANGE,captureOptions);var addTouchCancelListener=createEventHandle(TOUCHCANCEL,captureOptions);var addTouchMoveListener=createEventHandle(TOUCHMOVE,captureOptions);var addTouchStartListener=createEventHandle(TOUCHSTART,captureOptions);function restoreModality(){if(previousModality!=null||previousActiveModality!=null){if(previousModality!=null){modality=previousModality;previousModality=null;}if(previousActiveModality!=null){activeModality=previousActiveModality;previousActiveModality=null;}callListeners();}}function onBlurWindow(){previousModality=modality;previousActiveModality=activeModality;activeModality=KEYBOARD;modality=KEYBOARD;callListeners();isEmulatingMouseEvents=false;}function onFocusWindow(){restoreModality();}function onKeyDown(event){if(event.metaKey||event.altKey||event.ctrlKey){return;}if(modality!==KEYBOARD){modality=KEYBOARD;activeModality=KEYBOARD;callListeners();}}function onVisibilityChange(){if(document.visibilityState!=='hidden'){restoreModality();}}function onPointerish(event){var eventType=event.type;if(supportsPointerEvent()){if(eventType===POINTERDOWN){if(activeModality!==event.pointerType){modality=event.pointerType;activeModality=event.pointerType;callListeners();}return;}if(eventType===POINTERMOVE){if(modality!==event.pointerType){modality=event.pointerType;callListeners();}return;}}else{if(!isEmulatingMouseEvents){if(eventType===MOUSEDOWN){if(activeModality!==MOUSE){modality=MOUSE;activeModality=MOUSE;callListeners();}}if(eventType===MOUSEMOVE){if(modality!==MOUSE){modality=MOUSE;callListeners();}}}if(eventType===TOUCHSTART){isEmulatingMouseEvents=true;if(event.touches&&event.touches.length>1){isEmulatingMouseEvents=false;}if(activeModality!==TOUCH){modality=TOUCH;activeModality=TOUCH;callListeners();}return;}if(eventType===CONTEXTMENU||eventType===MOUSEUP||eventType===SELECTIONCHANGE||eventType===SCROLL||eventType===TOUCHCANCEL||eventType===TOUCHMOVE){isEmulatingMouseEvents=false;}}}if(canUseDOM){addBlurListener(window,onBlurWindow);addFocusListener(window,onFocusWindow);addKeyDownListener(document,onKeyDown);addPointerDownListener(document,onPointerish);addPointerMoveListener(document,onPointerish);addVisibilityChangeListener(document,onVisibilityChange);addContextMenuListener(document,onPointerish);addMouseDownListener(document,onPointerish);addMouseMoveListener(document,onPointerish);addMouseUpListener(document,onPointerish);addTouchCancelListener(document,onPointerish);addTouchMoveListener(document,onPointerish);addTouchStartListener(document,onPointerish);addSelectiomChangeListener(document,onPointerish);addScrollListener(document,onPointerish);}function callListeners(){var value={activeModality:activeModality,modality:modality};listeners.forEach(function(listener){listener(value);});}export function getActiveModality(){return activeModality;}export function getModality(){return modality;}export function addModalityListener(listener){listeners.add(listener);return function(){listeners.delete(listener);};}export function testOnly_resetActiveModality(){isEmulatingMouseEvents=false;activeModality=KEYBOARD;modality=KEYBOARD;}","map":{"version":3,"sources":["/Users/mas/Documents/perso/expo-splashscreen-generator/node_modules/react-native-web/dist/modules/modality/index.js"],"names":["canUseDOM","createEventHandle","supportsPointerEvent","window","PointerEvent","activeModality","modality","previousModality","previousActiveModality","isEmulatingMouseEvents","listeners","Set","KEYBOARD","MOUSE","TOUCH","BLUR","CONTEXTMENU","FOCUS","KEYDOWN","MOUSEDOWN","MOUSEMOVE","MOUSEUP","POINTERDOWN","POINTERMOVE","SCROLL","SELECTIONCHANGE","TOUCHCANCEL","TOUCHMOVE","TOUCHSTART","VISIBILITYCHANGE","bubbleOptions","passive","captureOptions","capture","addBlurListener","addFocusListener","addVisibilityChangeListener","addKeyDownListener","addPointerDownListener","addPointerMoveListener","addContextMenuListener","addMouseDownListener","addMouseMoveListener","addMouseUpListener","addScrollListener","addSelectiomChangeListener","addTouchCancelListener","addTouchMoveListener","addTouchStartListener","restoreModality","callListeners","onBlurWindow","onFocusWindow","onKeyDown","event","metaKey","altKey","ctrlKey","onVisibilityChange","document","visibilityState","onPointerish","eventType","type","pointerType","touches","length","value","forEach","listener","getActiveModality","getModality","addModalityListener","add","delete","testOnly_resetActiveModality"],"mappings":"AAQA,OAASA,SAAT,KAA0B,+BAA1B,CACA,MAAOC,CAAAA,iBAAP,4BAEA,GAAIC,CAAAA,oBAAoB,CAAG,QAASA,CAAAA,oBAAT,EAAgC,CACzD,MAAO,CAAC,EAAE,MAAOC,CAAAA,MAAP,GAAkB,WAAlB,EAAiCA,MAAM,CAACC,YAAP,EAAuB,IAA1D,CAAR,CACD,CAFD,CAIA,GAAIC,CAAAA,cAAc,CAAG,UAArB,CACA,GAAIC,CAAAA,QAAQ,CAAG,UAAf,CACA,GAAIC,CAAAA,gBAAJ,CACA,GAAIC,CAAAA,sBAAJ,CACA,GAAIC,CAAAA,sBAAsB,CAAG,KAA7B,CACA,GAAIC,CAAAA,SAAS,CAAG,GAAIC,CAAAA,GAAJ,EAAhB,CACA,GAAIC,CAAAA,QAAQ,CAAG,UAAf,CACA,GAAIC,CAAAA,KAAK,CAAG,OAAZ,CACA,GAAIC,CAAAA,KAAK,CAAG,OAAZ,CACA,GAAIC,CAAAA,IAAI,CAAG,MAAX,CACA,GAAIC,CAAAA,WAAW,CAAG,aAAlB,CACA,GAAIC,CAAAA,KAAK,CAAG,OAAZ,CACA,GAAIC,CAAAA,OAAO,CAAG,SAAd,CACA,GAAIC,CAAAA,SAAS,CAAG,WAAhB,CACA,GAAIC,CAAAA,SAAS,CAAG,WAAhB,CACA,GAAIC,CAAAA,OAAO,CAAG,SAAd,CACA,GAAIC,CAAAA,WAAW,CAAG,aAAlB,CACA,GAAIC,CAAAA,WAAW,CAAG,aAAlB,CACA,GAAIC,CAAAA,MAAM,CAAG,QAAb,CACA,GAAIC,CAAAA,eAAe,CAAG,iBAAtB,CACA,GAAIC,CAAAA,WAAW,CAAG,aAAlB,CACA,GAAIC,CAAAA,SAAS,CAAG,WAAhB,CACA,GAAIC,CAAAA,UAAU,CAAG,YAAjB,CACA,GAAIC,CAAAA,gBAAgB,CAAG,kBAAvB,CACA,GAAIC,CAAAA,aAAa,CAAG,CAClBC,OAAO,CAAE,IADS,CAApB,CAGA,GAAIC,CAAAA,cAAc,CAAG,CACnBC,OAAO,CAAE,IADU,CAEnBF,OAAO,CAAE,IAFU,CAArB,CAKA,GAAIG,CAAAA,eAAe,CAAGjC,iBAAiB,CAACc,IAAD,CAAOe,aAAP,CAAvC,CACA,GAAIK,CAAAA,gBAAgB,CAAGlC,iBAAiB,CAACgB,KAAD,CAAQa,aAAR,CAAxC,CAGA,GAAIM,CAAAA,2BAA2B,CAAGnC,iBAAiB,CAAC4B,gBAAD,CAAmBG,cAAnB,CAAnD,CACA,GAAIK,CAAAA,kBAAkB,CAAGpC,iBAAiB,CAACiB,OAAD,CAAUc,cAAV,CAA1C,CACA,GAAIM,CAAAA,sBAAsB,CAAGrC,iBAAiB,CAACqB,WAAD,CAAcU,cAAd,CAA9C,CACA,GAAIO,CAAAA,sBAAsB,CAAGtC,iBAAiB,CAACsB,WAAD,CAAcS,cAAd,CAA9C,CAEA,GAAIQ,CAAAA,sBAAsB,CAAGvC,iBAAiB,CAACe,WAAD,CAAcgB,cAAd,CAA9C,CACA,GAAIS,CAAAA,oBAAoB,CAAGxC,iBAAiB,CAACkB,SAAD,CAAYa,cAAZ,CAA5C,CACA,GAAIU,CAAAA,oBAAoB,CAAGzC,iBAAiB,CAACmB,SAAD,CAAYY,cAAZ,CAA5C,CACA,GAAIW,CAAAA,kBAAkB,CAAG1C,iBAAiB,CAACoB,OAAD,CAAUW,cAAV,CAA1C,CACA,GAAIY,CAAAA,iBAAiB,CAAG3C,iBAAiB,CAACuB,MAAD,CAASQ,cAAT,CAAzC,CACA,GAAIa,CAAAA,0BAA0B,CAAG5C,iBAAiB,CAACwB,eAAD,CAAkBO,cAAlB,CAAlD,CACA,GAAIc,CAAAA,sBAAsB,CAAG7C,iBAAiB,CAACyB,WAAD,CAAcM,cAAd,CAA9C,CACA,GAAIe,CAAAA,oBAAoB,CAAG9C,iBAAiB,CAAC0B,SAAD,CAAYK,cAAZ,CAA5C,CACA,GAAIgB,CAAAA,qBAAqB,CAAG/C,iBAAiB,CAAC2B,UAAD,CAAaI,cAAb,CAA7C,CAEA,QAASiB,CAAAA,eAAT,EAA2B,CACzB,GAAI1C,gBAAgB,EAAI,IAApB,EAA4BC,sBAAsB,EAAI,IAA1D,CAAgE,CAC9D,GAAID,gBAAgB,EAAI,IAAxB,CAA8B,CAC5BD,QAAQ,CAAGC,gBAAX,CACAA,gBAAgB,CAAG,IAAnB,CACD,CAED,GAAIC,sBAAsB,EAAI,IAA9B,CAAoC,CAClCH,cAAc,CAAGG,sBAAjB,CACAA,sBAAsB,CAAG,IAAzB,CACD,CAED0C,aAAa,GACd,CACF,CAED,QAASC,CAAAA,YAAT,EAAwB,CACtB5C,gBAAgB,CAAGD,QAAnB,CACAE,sBAAsB,CAAGH,cAAzB,CACAA,cAAc,CAAGO,QAAjB,CACAN,QAAQ,CAAGM,QAAX,CACAsC,aAAa,GAEbzC,sBAAsB,CAAG,KAAzB,CACD,CAED,QAAS2C,CAAAA,aAAT,EAAyB,CACvBH,eAAe,GAChB,CAED,QAASI,CAAAA,SAAT,CAAmBC,KAAnB,CAA0B,CACxB,GAAIA,KAAK,CAACC,OAAN,EAAiBD,KAAK,CAACE,MAAvB,EAAiCF,KAAK,CAACG,OAA3C,CAAoD,CAClD,OACD,CAED,GAAInD,QAAQ,GAAKM,QAAjB,CAA2B,CACzBN,QAAQ,CAAGM,QAAX,CACAP,cAAc,CAAGO,QAAjB,CACAsC,aAAa,GACd,CACF,CAED,QAASQ,CAAAA,kBAAT,EAA8B,CAC5B,GAAIC,QAAQ,CAACC,eAAT,GAA6B,QAAjC,CAA2C,CACzCX,eAAe,GAChB,CACF,CAED,QAASY,CAAAA,YAAT,CAAsBP,KAAtB,CAA6B,CAC3B,GAAIQ,CAAAA,SAAS,CAAGR,KAAK,CAACS,IAAtB,CAEA,GAAI7D,oBAAoB,EAAxB,CAA4B,CAC1B,GAAI4D,SAAS,GAAKxC,WAAlB,CAA+B,CAC7B,GAAIjB,cAAc,GAAKiD,KAAK,CAACU,WAA7B,CAA0C,CACxC1D,QAAQ,CAAGgD,KAAK,CAACU,WAAjB,CACA3D,cAAc,CAAGiD,KAAK,CAACU,WAAvB,CACAd,aAAa,GACd,CAED,OACD,CAED,GAAIY,SAAS,GAAKvC,WAAlB,CAA+B,CAC7B,GAAIjB,QAAQ,GAAKgD,KAAK,CAACU,WAAvB,CAAoC,CAClC1D,QAAQ,CAAGgD,KAAK,CAACU,WAAjB,CACAd,aAAa,GACd,CAED,OACD,CACF,CAnBD,IAoBK,CACD,GAAI,CAACzC,sBAAL,CAA6B,CAC3B,GAAIqD,SAAS,GAAK3C,SAAlB,CAA6B,CAC3B,GAAId,cAAc,GAAKQ,KAAvB,CAA8B,CAC5BP,QAAQ,CAAGO,KAAX,CACAR,cAAc,CAAGQ,KAAjB,CACAqC,aAAa,GACd,CACF,CAED,GAAIY,SAAS,GAAK1C,SAAlB,CAA6B,CAC3B,GAAId,QAAQ,GAAKO,KAAjB,CAAwB,CACtBP,QAAQ,CAAGO,KAAX,CACAqC,aAAa,GACd,CACF,CACF,CAGD,GAAIY,SAAS,GAAKlC,UAAlB,CAA8B,CAC5BnB,sBAAsB,CAAG,IAAzB,CAEA,GAAI6C,KAAK,CAACW,OAAN,EAAiBX,KAAK,CAACW,OAAN,CAAcC,MAAd,CAAuB,CAA5C,CAA+C,CAC7CzD,sBAAsB,CAAG,KAAzB,CACD,CAED,GAAIJ,cAAc,GAAKS,KAAvB,CAA8B,CAC5BR,QAAQ,CAAGQ,KAAX,CACAT,cAAc,CAAGS,KAAjB,CACAoC,aAAa,GACd,CAED,OACD,CAID,GAAIY,SAAS,GAAK9C,WAAd,EAA6B8C,SAAS,GAAKzC,OAA3C,EAAsDyC,SAAS,GAAKrC,eAApE,EAAuFqC,SAAS,GAAKtC,MAArG,EAA+GsC,SAAS,GAAKpC,WAA7H,EAA4IoC,SAAS,GAAKnC,SAA9J,CAAyK,CACvKlB,sBAAsB,CAAG,KAAzB,CACD,CACF,CACJ,CAED,GAAIT,SAAJ,CAAe,CACbkC,eAAe,CAAC/B,MAAD,CAASgD,YAAT,CAAf,CACAhB,gBAAgB,CAAChC,MAAD,CAASiD,aAAT,CAAhB,CACAf,kBAAkB,CAACsB,QAAD,CAAWN,SAAX,CAAlB,CACAf,sBAAsB,CAACqB,QAAD,CAAWE,YAAX,CAAtB,CACAtB,sBAAsB,CAACoB,QAAD,CAAWE,YAAX,CAAtB,CACAzB,2BAA2B,CAACuB,QAAD,CAAWD,kBAAX,CAA3B,CAEAlB,sBAAsB,CAACmB,QAAD,CAAWE,YAAX,CAAtB,CACApB,oBAAoB,CAACkB,QAAD,CAAWE,YAAX,CAApB,CACAnB,oBAAoB,CAACiB,QAAD,CAAWE,YAAX,CAApB,CACAlB,kBAAkB,CAACgB,QAAD,CAAWE,YAAX,CAAlB,CACAf,sBAAsB,CAACa,QAAD,CAAWE,YAAX,CAAtB,CACAd,oBAAoB,CAACY,QAAD,CAAWE,YAAX,CAApB,CACAb,qBAAqB,CAACW,QAAD,CAAWE,YAAX,CAArB,CACAhB,0BAA0B,CAACc,QAAD,CAAWE,YAAX,CAA1B,CACAjB,iBAAiB,CAACe,QAAD,CAAWE,YAAX,CAAjB,CACD,CAED,QAASX,CAAAA,aAAT,EAAyB,CACvB,GAAIiB,CAAAA,KAAK,CAAG,CACV9D,cAAc,CAAEA,cADN,CAEVC,QAAQ,CAAEA,QAFA,CAAZ,CAIAI,SAAS,CAAC0D,OAAV,CAAkB,SAAUC,QAAV,CAAoB,CACpCA,QAAQ,CAACF,KAAD,CAAR,CACD,CAFD,EAGD,CAED,MAAO,SAASG,CAAAA,iBAAT,EAA6B,CAClC,MAAOjE,CAAAA,cAAP,CACD,CACD,MAAO,SAASkE,CAAAA,WAAT,EAAuB,CAC5B,MAAOjE,CAAAA,QAAP,CACD,CACD,MAAO,SAASkE,CAAAA,mBAAT,CAA6BH,QAA7B,CAAuC,CAC5C3D,SAAS,CAAC+D,GAAV,CAAcJ,QAAd,EACA,MAAO,WAAY,CACjB3D,SAAS,CAACgE,MAAV,CAAiBL,QAAjB,EACD,CAFD,CAGD,CACD,MAAO,SAASM,CAAAA,4BAAT,EAAwC,CAC7ClE,sBAAsB,CAAG,KAAzB,CACAJ,cAAc,CAAGO,QAAjB,CACAN,QAAQ,CAAGM,QAAX,CACD","sourcesContent":["/**\n * Copyright (c) Nicolas Gallagher.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\nimport { canUseDOM } from 'fbjs/lib/ExecutionEnvironment';\nimport createEventHandle from '../createEventHandle';\n\nvar supportsPointerEvent = function supportsPointerEvent() {\n  return !!(typeof window !== 'undefined' && window.PointerEvent != null);\n};\n\nvar activeModality = 'keyboard';\nvar modality = 'keyboard';\nvar previousModality;\nvar previousActiveModality;\nvar isEmulatingMouseEvents = false;\nvar listeners = new Set();\nvar KEYBOARD = 'keyboard';\nvar MOUSE = 'mouse';\nvar TOUCH = 'touch';\nvar BLUR = 'blur';\nvar CONTEXTMENU = 'contextmenu';\nvar FOCUS = 'focus';\nvar KEYDOWN = 'keydown';\nvar MOUSEDOWN = 'mousedown';\nvar MOUSEMOVE = 'mousemove';\nvar MOUSEUP = 'mouseup';\nvar POINTERDOWN = 'pointerdown';\nvar POINTERMOVE = 'pointermove';\nvar SCROLL = 'scroll';\nvar SELECTIONCHANGE = 'selectionchange';\nvar TOUCHCANCEL = 'touchcancel';\nvar TOUCHMOVE = 'touchmove';\nvar TOUCHSTART = 'touchstart';\nvar VISIBILITYCHANGE = 'visibilitychange';\nvar bubbleOptions = {\n  passive: true\n};\nvar captureOptions = {\n  capture: true,\n  passive: true\n}; // Window events\n\nvar addBlurListener = createEventHandle(BLUR, bubbleOptions);\nvar addFocusListener = createEventHandle(FOCUS, bubbleOptions); // Must be capture phase because 'stopPropagation' might prevent these\n// events bubbling to the document.\n\nvar addVisibilityChangeListener = createEventHandle(VISIBILITYCHANGE, captureOptions);\nvar addKeyDownListener = createEventHandle(KEYDOWN, captureOptions);\nvar addPointerDownListener = createEventHandle(POINTERDOWN, captureOptions);\nvar addPointerMoveListener = createEventHandle(POINTERMOVE, captureOptions); // Fallback events\n\nvar addContextMenuListener = createEventHandle(CONTEXTMENU, captureOptions);\nvar addMouseDownListener = createEventHandle(MOUSEDOWN, captureOptions);\nvar addMouseMoveListener = createEventHandle(MOUSEMOVE, captureOptions);\nvar addMouseUpListener = createEventHandle(MOUSEUP, captureOptions);\nvar addScrollListener = createEventHandle(SCROLL, captureOptions);\nvar addSelectiomChangeListener = createEventHandle(SELECTIONCHANGE, captureOptions);\nvar addTouchCancelListener = createEventHandle(TOUCHCANCEL, captureOptions);\nvar addTouchMoveListener = createEventHandle(TOUCHMOVE, captureOptions);\nvar addTouchStartListener = createEventHandle(TOUCHSTART, captureOptions);\n\nfunction restoreModality() {\n  if (previousModality != null || previousActiveModality != null) {\n    if (previousModality != null) {\n      modality = previousModality;\n      previousModality = null;\n    }\n\n    if (previousActiveModality != null) {\n      activeModality = previousActiveModality;\n      previousActiveModality = null;\n    }\n\n    callListeners();\n  }\n}\n\nfunction onBlurWindow() {\n  previousModality = modality;\n  previousActiveModality = activeModality;\n  activeModality = KEYBOARD;\n  modality = KEYBOARD;\n  callListeners(); // for fallback events\n\n  isEmulatingMouseEvents = false;\n}\n\nfunction onFocusWindow() {\n  restoreModality();\n}\n\nfunction onKeyDown(event) {\n  if (event.metaKey || event.altKey || event.ctrlKey) {\n    return;\n  }\n\n  if (modality !== KEYBOARD) {\n    modality = KEYBOARD;\n    activeModality = KEYBOARD;\n    callListeners();\n  }\n}\n\nfunction onVisibilityChange() {\n  if (document.visibilityState !== 'hidden') {\n    restoreModality();\n  }\n}\n\nfunction onPointerish(event) {\n  var eventType = event.type;\n\n  if (supportsPointerEvent()) {\n    if (eventType === POINTERDOWN) {\n      if (activeModality !== event.pointerType) {\n        modality = event.pointerType;\n        activeModality = event.pointerType;\n        callListeners();\n      }\n\n      return;\n    }\n\n    if (eventType === POINTERMOVE) {\n      if (modality !== event.pointerType) {\n        modality = event.pointerType;\n        callListeners();\n      }\n\n      return;\n    }\n  } // Fallback for non-PointerEvent environment\n  else {\n      if (!isEmulatingMouseEvents) {\n        if (eventType === MOUSEDOWN) {\n          if (activeModality !== MOUSE) {\n            modality = MOUSE;\n            activeModality = MOUSE;\n            callListeners();\n          }\n        }\n\n        if (eventType === MOUSEMOVE) {\n          if (modality !== MOUSE) {\n            modality = MOUSE;\n            callListeners();\n          }\n        }\n      } // Flag when browser may produce emulated events\n\n\n      if (eventType === TOUCHSTART) {\n        isEmulatingMouseEvents = true;\n\n        if (event.touches && event.touches.length > 1) {\n          isEmulatingMouseEvents = false;\n        }\n\n        if (activeModality !== TOUCH) {\n          modality = TOUCH;\n          activeModality = TOUCH;\n          callListeners();\n        }\n\n        return;\n      } // Remove flag after emulated events are finished or cancelled, and if an\n      // event occurs that cuts short a touch event sequence.\n\n\n      if (eventType === CONTEXTMENU || eventType === MOUSEUP || eventType === SELECTIONCHANGE || eventType === SCROLL || eventType === TOUCHCANCEL || eventType === TOUCHMOVE) {\n        isEmulatingMouseEvents = false;\n      }\n    }\n}\n\nif (canUseDOM) {\n  addBlurListener(window, onBlurWindow);\n  addFocusListener(window, onFocusWindow);\n  addKeyDownListener(document, onKeyDown);\n  addPointerDownListener(document, onPointerish);\n  addPointerMoveListener(document, onPointerish);\n  addVisibilityChangeListener(document, onVisibilityChange); // fallbacks\n\n  addContextMenuListener(document, onPointerish);\n  addMouseDownListener(document, onPointerish);\n  addMouseMoveListener(document, onPointerish);\n  addMouseUpListener(document, onPointerish);\n  addTouchCancelListener(document, onPointerish);\n  addTouchMoveListener(document, onPointerish);\n  addTouchStartListener(document, onPointerish);\n  addSelectiomChangeListener(document, onPointerish);\n  addScrollListener(document, onPointerish);\n}\n\nfunction callListeners() {\n  var value = {\n    activeModality: activeModality,\n    modality: modality\n  };\n  listeners.forEach(function (listener) {\n    listener(value);\n  });\n}\n\nexport function getActiveModality() {\n  return activeModality;\n}\nexport function getModality() {\n  return modality;\n}\nexport function addModalityListener(listener) {\n  listeners.add(listener);\n  return function () {\n    listeners.delete(listener);\n  };\n}\nexport function testOnly_resetActiveModality() {\n  isEmulatingMouseEvents = false;\n  activeModality = KEYBOARD;\n  modality = KEYBOARD;\n}"]},"metadata":{},"sourceType":"module"}