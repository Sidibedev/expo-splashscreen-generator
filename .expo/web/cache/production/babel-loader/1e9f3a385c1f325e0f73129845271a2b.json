{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _extends from\"@babel/runtime/helpers/extends\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}import React,{Component}from'react';import PropTypes from'prop-types';import Dimensions from\"react-native-web/dist/exports/Dimensions\";import InteractionManager from\"react-native-web/dist/exports/InteractionManager\";import Modal from\"react-native-web/dist/exports/Modal\";import TouchableWithoutFeedback from\"react-native-web/dist/exports/TouchableWithoutFeedback\";import View from\"react-native-web/dist/exports/View\";import rfcIsEqual from'react-fast-compare';import{Point,Size,Rect,swapSizeDimmensions,makeChildlessRect,computeCenterGeometry,computeTopGeometry,computeBottomGeometry,computeLeftGeometry,computeRightGeometry}from\"./geom\";import styleGenerator from\"./styles\";import TooltipChildrenContext from\"./tooltip-children.context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export{TooltipChildrenContext};var DEFAULT_DISPLAY_INSETS={top:24,bottom:24,left:24,right:24};var computeDisplayInsets=function computeDisplayInsets(insetsFromProps){return _extends({},DEFAULT_DISPLAY_INSETS,insetsFromProps);};var invertPlacement=function invertPlacement(placement){switch(placement){case'top':return'bottom';case'bottom':return'top';case'right':return'left';case'left':return'right';default:return placement;}};var Tooltip=function(_Component){_inherits(Tooltip,_Component);var _super=_createSuper(Tooltip);function Tooltip(props){var _this;_classCallCheck(this,Tooltip);_this=_super.call(this,props);_this.updateWindowDims=function(dims){_this.setState({windowDims:dims.window,contentSize:new Size(0,0),adjustedContentSize:new Size(0,0),anchorPoint:new Point(0,0),tooltipOrigin:new Point(0,0),childRect:new Rect(0,0,0,0),measurementsFinished:false},function(){setTimeout(function(){_this.measureChildRect();},500);});};_this.doChildlessPlacement=function(){_this.onChildMeasurementComplete(makeChildlessRect({displayInsets:_this.state.displayInsets,placement:_this.state.placement,windowDims:_this.state.windowDims}));};_this.measureContent=function(e){var _e$nativeEvent$layout=e.nativeEvent.layout,width=_e$nativeEvent$layout.width,height=_e$nativeEvent$layout.height;var contentSize=new Size(width,height);_this.setState({contentSize:contentSize},function(){_this.computeGeometry();});};_this.onChildMeasurementComplete=function(rect){_this.setState({childRect:rect,waitingForInteractions:false},function(){_this.isMeasuringChild=false;if(_this.state.contentSize.width){_this.computeGeometry();}});};_this.measureChildRect=function(){var doMeasurement=function doMeasurement(){if(!_this.isMeasuringChild){_this.isMeasuringChild=true;if(_this.childWrapper.current&&typeof _this.childWrapper.current.measure==='function'){_this.childWrapper.current.measure(function(x,y,width,height,pageX,pageY){var childRect=new Rect(pageX,pageY,width,height);if(Object.values(childRect).every(function(value){return value!==undefined;})){_this.onChildMeasurementComplete(childRect);}else{_this.doChildlessPlacement();}});}else{_this.doChildlessPlacement();}}};if(_this.props.useInteractionManager){if(_this.interactionPromise){_this.interactionPromise.cancel();}_this.interactionPromise=InteractionManager.runAfterInteractions(function(){doMeasurement();});}else{doMeasurement();}};_this.computeGeometry=function(){var _this$props=_this.props,arrowSize=_this$props.arrowSize,childContentSpacing=_this$props.childContentSpacing;var _this$state=_this.state,childRect=_this$state.childRect,contentSize=_this$state.contentSize,displayInsets=_this$state.displayInsets,placement=_this$state.placement,windowDims=_this$state.windowDims;var options={displayInsets:displayInsets,childRect:childRect,windowDims:windowDims,arrowSize:placement==='top'||placement==='bottom'?arrowSize:swapSizeDimmensions(arrowSize),contentSize:contentSize,childContentSpacing:childContentSpacing};var geom=computeTopGeometry(options);if(placement==='center'&&React.Children.count(_this.props.children)===0){geom=computeCenterGeometry(options);}else{switch(placement){case'bottom':geom=computeBottomGeometry(options);break;case'left':geom=computeLeftGeometry(options);break;case'right':geom=computeRightGeometry(options);break;case'top':default:break;}}var _geom=geom,tooltipOrigin=_geom.tooltipOrigin,anchorPoint=_geom.anchorPoint,adjustedContentSize=_geom.adjustedContentSize;_this.setState({tooltipOrigin:tooltipOrigin,anchorPoint:anchorPoint,placement:placement,measurementsFinished:childRect.width&&contentSize.width,adjustedContentSize:adjustedContentSize});};_this.renderChildInTooltip=function(){var _this$state$childRect=_this.state.childRect,height=_this$state$childRect.height,width=_this$state$childRect.width,x=_this$state$childRect.x,y=_this$state$childRect.y;var onTouchEnd=function onTouchEnd(){if(_this.props.closeOnChildInteraction){_this.props.onClose();}};return _jsx(TooltipChildrenContext.Provider,{value:{tooltipDuplicate:true},children:_jsx(View,{onTouchEnd:onTouchEnd,pointerEvents:_this.props.allowChildInteraction?'box-none':'none',style:[{position:'absolute',height:height,width:width,top:y,left:x,alignItems:'center',justifyContent:'center'},_this.props.childrenWrapperStyle],children:_this.props.children})});};_this.renderContentForTooltip=function(){var generatedStyles=styleGenerator({adjustedContentSize:_this.state.adjustedContentSize,anchorPoint:_this.state.anchorPoint,arrowSize:_this.props.arrowSize,displayInsets:_this.state.displayInsets,measurementsFinished:_this.state.measurementsFinished,ownProps:_objectSpread({},_this.props),placement:_this.state.placement,tooltipOrigin:_this.state.tooltipOrigin,topAdjustment:_this.props.topAdjustment});var hasChildren=React.Children.count(_this.props.children)>0;var onPressContent=function onPressContent(){if(_this.props.closeOnContentInteraction){_this.props.onClose();}};return _jsx(TouchableWithoutFeedback,{onPress:_this.props.onClose,accessible:_this.props.accessible,children:_jsxs(View,{style:generatedStyles.containerStyle,children:[_jsx(View,{style:[generatedStyles.backgroundStyle],children:_jsxs(View,{style:generatedStyles.tooltipStyle,children:[hasChildren?_jsx(View,{style:generatedStyles.arrowStyle}):null,_jsx(View,{onLayout:_this.measureContent,style:generatedStyles.contentStyle,children:_jsx(TouchableWithoutFeedback,{onPress:onPressContent,accessible:_this.props.accessible,children:_this.props.content})})]})}),hasChildren&&_this.props.showChildInTooltip?_this.renderChildInTooltip():null]})});};var isVisible=props.isVisible,useInteractionManager=props.useInteractionManager;_this.isMeasuringChild=false;_this.interactionPromise=null;_this.dimensionsSubscription=null;_this.childWrapper=React.createRef();_this.state={waitingForInteractions:isVisible&&useInteractionManager,contentSize:new Size(0,0),adjustedContentSize:new Size(0,0),anchorPoint:new Point(0,0),tooltipOrigin:new Point(0,0),childRect:new Rect(0,0,0,0),displayInsets:computeDisplayInsets(props.displayInsets),placement:React.Children.count(props.children)===0?invertPlacement(props.placement):props.placement,measurementsFinished:false,windowDims:Dimensions.get('window')};return _this;}_createClass(Tooltip,[{key:\"componentDidMount\",value:function componentDidMount(){this.dimensionsSubscription=Dimensions.addEventListener('change',this.updateWindowDims);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var _this2=this;var _this$props2=this.props,content=_this$props2.content,isVisible=_this$props2.isVisible,placement=_this$props2.placement;var displayInsets=this.state.displayInsets;var contentChanged=!rfcIsEqual(prevProps.content,content);var placementChanged=prevProps.placement!==placement;var becameVisible=isVisible&&!prevProps.isVisible;var insetsChanged=!rfcIsEqual(prevState.displayInsets,displayInsets);if(contentChanged||placementChanged||becameVisible||insetsChanged){setTimeout(function(){_this2.measureChildRect();});}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){var _this$dimensionsSubsc;if((_this$dimensionsSubsc=this.dimensionsSubscription)!=null&&_this$dimensionsSubsc.remove){this.dimensionsSubscription.remove();}else{Dimensions.removeEventListener('change',this.updateWindowDims);}if(this.interactionPromise){this.interactionPromise.cancel();}}},{key:\"render\",value:function render(){var _this$props3=this.props,children=_this$props3.children,isVisible=_this$props3.isVisible,useReactNativeModal=_this$props3.useReactNativeModal,modalComponent=_this$props3.modalComponent;var hasChildren=React.Children.count(children)>0;var showTooltip=isVisible&&!this.state.waitingForInteractions;var ModalComponent=modalComponent||Modal;return _jsxs(React.Fragment,{children:[useReactNativeModal?_jsx(ModalComponent,{transparent:true,visible:showTooltip,onRequestClose:this.props.onClose,supportedOrientations:this.props.supportedOrientations,children:this.renderContentForTooltip()}):null,hasChildren?_jsx(View,{ref:this.childWrapper,onLayout:this.measureChildRect,style:this.props.parentWrapperStyle,children:children}):null,!useReactNativeModal&&showTooltip?this.renderContentForTooltip():null]});}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(nextProps,prevState){var nextState={};var nextPlacement=React.Children.count(nextProps.children)===0?invertPlacement(nextProps.placement):nextProps.placement;if(nextPlacement!==prevState.placement){nextState.placement=nextPlacement;}var nextDisplayInsets=computeDisplayInsets(nextProps.displayInsets);if(!rfcIsEqual(nextDisplayInsets,prevState.displayInsets)){nextState.displayInsets=nextDisplayInsets;}if(prevState.measurementsFinished&&!nextProps.isVisible){nextState.measurementsFinished=false;nextState.adjustedContentSize=new Size(0,0);}if(Object.keys(nextState).length){return nextState;}return null;}}]);return Tooltip;}(Component);Tooltip.defaultProps={allowChildInteraction:true,arrowSize:new Size(16,8),backgroundColor:'rgba(0,0,0,0.5)',childContentSpacing:4,children:null,closeOnChildInteraction:true,closeOnContentInteraction:true,content:_jsx(View,{}),displayInsets:{},disableShadow:false,isVisible:false,onClose:function onClose(){console.warn('[react-native-walkthrough-tooltip] onClose prop not provided');},placement:'center',showChildInTooltip:true,supportedOrientations:['portrait','landscape'],useInteractionManager:false,useReactNativeModal:true,topAdjustment:0,accessible:true};Tooltip.propTypes={allowChildInteraction:PropTypes.bool,arrowSize:PropTypes.shape({height:PropTypes.number,width:PropTypes.number}),backgroundColor:PropTypes.string,childContentSpacing:PropTypes.number,children:PropTypes.oneOfType([PropTypes.node,PropTypes.func]),closeOnChildInteraction:PropTypes.bool,closeOnContentInteraction:PropTypes.bool,content:PropTypes.oneOfType([PropTypes.node,PropTypes.func]),displayInsets:PropTypes.shape({top:PropTypes.number,bottom:PropTypes.number,left:PropTypes.number,right:PropTypes.number}),disableShadow:PropTypes.bool,isVisible:PropTypes.bool,onClose:PropTypes.func,placement:PropTypes.oneOf(['top','left','bottom','right','center']),showChildInTooltip:PropTypes.bool,supportedOrientations:PropTypes.arrayOf(PropTypes.string),useInteractionManager:PropTypes.bool,useReactNativeModal:PropTypes.bool,topAdjustment:PropTypes.number,accessible:PropTypes.bool};export default Tooltip;","map":{"version":3,"sources":["/Users/mas/Documents/perso/expo-splashscreen-generator/node_modules/react-native-walkthrough-tooltip/src/tooltip.js"],"names":["React","Component","PropTypes","rfcIsEqual","Point","Size","Rect","swapSizeDimmensions","makeChildlessRect","computeCenterGeometry","computeTopGeometry","computeBottomGeometry","computeLeftGeometry","computeRightGeometry","styleGenerator","TooltipChildrenContext","DEFAULT_DISPLAY_INSETS","top","bottom","left","right","computeDisplayInsets","insetsFromProps","invertPlacement","placement","Tooltip","props","updateWindowDims","dims","setState","windowDims","window","contentSize","adjustedContentSize","anchorPoint","tooltipOrigin","childRect","measurementsFinished","setTimeout","measureChildRect","doChildlessPlacement","onChildMeasurementComplete","displayInsets","state","measureContent","e","nativeEvent","layout","width","height","computeGeometry","rect","waitingForInteractions","isMeasuringChild","doMeasurement","childWrapper","current","measure","x","y","pageX","pageY","Object","values","every","value","undefined","useInteractionManager","interactionPromise","cancel","InteractionManager","runAfterInteractions","arrowSize","childContentSpacing","options","geom","Children","count","children","renderChildInTooltip","onTouchEnd","closeOnChildInteraction","onClose","tooltipDuplicate","allowChildInteraction","position","alignItems","justifyContent","childrenWrapperStyle","renderContentForTooltip","generatedStyles","ownProps","topAdjustment","hasChildren","onPressContent","closeOnContentInteraction","accessible","containerStyle","backgroundStyle","tooltipStyle","arrowStyle","contentStyle","content","showChildInTooltip","isVisible","dimensionsSubscription","createRef","Dimensions","get","addEventListener","prevProps","prevState","contentChanged","placementChanged","becameVisible","insetsChanged","remove","removeEventListener","useReactNativeModal","modalComponent","showTooltip","ModalComponent","Modal","supportedOrientations","parentWrapperStyle","nextProps","nextState","nextPlacement","nextDisplayInsets","keys","length","defaultProps","backgroundColor","disableShadow","console","warn","propTypes","bool","shape","number","string","oneOfType","node","func","oneOf","arrayOf"],"mappings":"25DAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,SAAP,KAAsB,YAAtB,C,2VAQA,MAAOC,CAAAA,UAAP,KAAuB,oBAAvB,CACA,OACEC,KADF,CAEEC,IAFF,CAGEC,IAHF,CAIEC,mBAJF,CAKEC,iBALF,CAMEC,qBANF,CAOEC,kBAPF,CAQEC,qBARF,CASEC,mBATF,CAUEC,oBAVF,cAYA,MAAOC,CAAAA,cAAP,gBACA,MAAOC,CAAAA,sBAAP,kC,wFAEA,OAASA,sBAAT,EAEA,GAAMC,CAAAA,sBAAsB,CAAG,CAC7BC,GAAG,CAAE,EADwB,CAE7BC,MAAM,CAAE,EAFqB,CAG7BC,IAAI,CAAE,EAHuB,CAI7BC,KAAK,CAAE,EAJsB,CAA/B,CAOA,GAAMC,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAAAC,eAAe,QAC1C,UAAc,EAAd,CAAkBN,sBAAlB,CAA0CM,eAA1C,CAD0C,EAA5C,CAGA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAC,SAAS,CAAI,CACnC,OAAQA,SAAR,EACE,IAAK,KAAL,CACE,MAAO,QAAP,CACF,IAAK,QAAL,CACE,MAAO,KAAP,CACF,IAAK,OAAL,CACE,MAAO,MAAP,CACF,IAAK,MAAL,CACE,MAAO,OAAP,CACF,QACE,MAAOA,CAAAA,SAAP,CAVJ,CAYD,CAbD,C,GAeMC,CAAAA,O,qFAyDJ,iBAAYC,KAAZ,CAAmB,yCACjB,uBAAMA,KAAN,EADiB,MAqGnBC,gBArGmB,CAqGA,SAAAC,IAAI,CAAI,CACzB,MAAKC,QAAL,CACE,CACEC,UAAU,CAAEF,IAAI,CAACG,MADnB,CAEEC,WAAW,CAAE,GAAI3B,CAAAA,IAAJ,CAAS,CAAT,CAAY,CAAZ,CAFf,CAGE4B,mBAAmB,CAAE,GAAI5B,CAAAA,IAAJ,CAAS,CAAT,CAAY,CAAZ,CAHvB,CAIE6B,WAAW,CAAE,GAAI9B,CAAAA,KAAJ,CAAU,CAAV,CAAa,CAAb,CAJf,CAKE+B,aAAa,CAAE,GAAI/B,CAAAA,KAAJ,CAAU,CAAV,CAAa,CAAb,CALjB,CAMEgC,SAAS,CAAE,GAAI9B,CAAAA,IAAJ,CAAS,CAAT,CAAY,CAAZ,CAAe,CAAf,CAAkB,CAAlB,CANb,CAOE+B,oBAAoB,CAAE,KAPxB,CADF,CAUE,UAAM,CACJC,UAAU,CAAC,UAAM,CACf,MAAKC,gBAAL,GACD,CAFS,CAEP,GAFO,CAAV,CAGD,CAdH,EAgBD,CAtHkB,OAwHnBC,oBAxHmB,CAwHI,UAAM,CAC3B,MAAKC,0BAAL,CACEjC,iBAAiB,CAAC,CAChBkC,aAAa,CAAE,MAAKC,KAAL,CAAWD,aADV,CAEhBlB,SAAS,CAAE,MAAKmB,KAAL,CAAWnB,SAFN,CAGhBM,UAAU,CAAE,MAAKa,KAAL,CAAWb,UAHP,CAAD,CADnB,EAOD,CAhIkB,OAkInBc,cAlImB,CAkIF,SAAAC,CAAC,CAAI,CACpB,0BAA0BA,CAAC,CAACC,WAAF,CAAcC,MAAxC,CAAQC,KAAR,uBAAQA,KAAR,CAAeC,MAAf,uBAAeA,MAAf,CACA,GAAMjB,CAAAA,WAAW,CAAG,GAAI3B,CAAAA,IAAJ,CAAS2C,KAAT,CAAgBC,MAAhB,CAApB,CACA,MAAKpB,QAAL,CAAc,CAAEG,WAAW,CAAXA,WAAF,CAAd,CAA+B,UAAM,CACnC,MAAKkB,eAAL,GACD,CAFD,EAGD,CAxIkB,OA0InBT,0BA1ImB,CA0IU,SAAAU,IAAI,CAAI,CACnC,MAAKtB,QAAL,CACE,CACEO,SAAS,CAAEe,IADb,CAEEC,sBAAsB,CAAE,KAF1B,CADF,CAKE,UAAM,CACJ,MAAKC,gBAAL,CAAwB,KAAxB,CACA,GAAI,MAAKV,KAAL,CAAWX,WAAX,CAAuBgB,KAA3B,CAAkC,CAChC,MAAKE,eAAL,GACD,CACF,CAVH,EAYD,CAvJkB,OAyJnBX,gBAzJmB,CAyJA,UAAM,CACvB,GAAMe,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC1B,GAAI,CAAC,MAAKD,gBAAV,CAA4B,CAC1B,MAAKA,gBAAL,CAAwB,IAAxB,CACA,GACE,MAAKE,YAAL,CAAkBC,OAAlB,EACA,MAAO,OAAKD,YAAL,CAAkBC,OAAlB,CAA0BC,OAAjC,GAA6C,UAF/C,CAGE,CACA,MAAKF,YAAL,CAAkBC,OAAlB,CAA0BC,OAA1B,CACE,SAACC,CAAD,CAAIC,CAAJ,CAAOX,KAAP,CAAcC,MAAd,CAAsBW,KAAtB,CAA6BC,KAA7B,CAAuC,CACrC,GAAMzB,CAAAA,SAAS,CAAG,GAAI9B,CAAAA,IAAJ,CAASsD,KAAT,CAAgBC,KAAhB,CAAuBb,KAAvB,CAA8BC,MAA9B,CAAlB,CACA,GACEa,MAAM,CAACC,MAAP,CAAc3B,SAAd,EAAyB4B,KAAzB,CAA+B,SAAAC,KAAK,QAAIA,CAAAA,KAAK,GAAKC,SAAd,EAApC,CADF,CAEE,CACA,MAAKzB,0BAAL,CAAgCL,SAAhC,EACD,CAJD,IAIO,CACL,MAAKI,oBAAL,GACD,CACF,CAVH,EAYD,CAhBD,IAgBO,CACL,MAAKA,oBAAL,GACD,CACF,CACF,CAvBD,CAyBA,GAAI,MAAKd,KAAL,CAAWyC,qBAAf,CAAsC,CACpC,GAAI,MAAKC,kBAAT,CAA6B,CAC3B,MAAKA,kBAAL,CAAwBC,MAAxB,GACD,CACD,MAAKD,kBAAL,CAA0BE,kBAAkB,CAACC,oBAAnB,CAAwC,UAAM,CACtEjB,aAAa,GACd,CAFyB,CAA1B,CAGD,CAPD,IAOO,CACLA,aAAa,GACd,CACF,CA7LkB,OA+LnBJ,eA/LmB,CA+LD,UAAM,CACtB,gBAA2C,MAAKxB,KAAhD,CAAQ8C,SAAR,aAAQA,SAAR,CAAmBC,mBAAnB,aAAmBA,mBAAnB,CACA,gBAMI,MAAK9B,KANT,CACEP,SADF,aACEA,SADF,CAEEJ,WAFF,aAEEA,WAFF,CAGEU,aAHF,aAGEA,aAHF,CAIElB,SAJF,aAIEA,SAJF,CAKEM,UALF,aAKEA,UALF,CAQA,GAAM4C,CAAAA,OAAO,CAAG,CACdhC,aAAa,CAAbA,aADc,CAEdN,SAAS,CAATA,SAFc,CAGdN,UAAU,CAAVA,UAHc,CAId0C,SAAS,CACPhD,SAAS,GAAK,KAAd,EAAuBA,SAAS,GAAK,QAArC,CACIgD,SADJ,CAEIjE,mBAAmB,CAACiE,SAAD,CAPX,CAQdxC,WAAW,CAAXA,WARc,CASdyC,mBAAmB,CAAnBA,mBATc,CAAhB,CAYA,GAAIE,CAAAA,IAAI,CAAGjE,kBAAkB,CAACgE,OAAD,CAA7B,CAGA,GACElD,SAAS,GAAK,QAAd,EACAxB,KAAK,CAAC4E,QAAN,CAAeC,KAAf,CAAqB,MAAKnD,KAAL,CAAWoD,QAAhC,IAA8C,CAFhD,CAGE,CACAH,IAAI,CAAGlE,qBAAqB,CAACiE,OAAD,CAA5B,CACD,CALD,IAKO,CACL,OAAQlD,SAAR,EACE,IAAK,QAAL,CACEmD,IAAI,CAAGhE,qBAAqB,CAAC+D,OAAD,CAA5B,CACA,MACF,IAAK,MAAL,CACEC,IAAI,CAAG/D,mBAAmB,CAAC8D,OAAD,CAA1B,CACA,MACF,IAAK,OAAL,CACEC,IAAI,CAAG9D,oBAAoB,CAAC6D,OAAD,CAA3B,CACA,MACF,IAAK,KAAL,CACA,QACE,MAZJ,CAcD,CAED,UAA4DC,IAA5D,CAAQxC,aAAR,OAAQA,aAAR,CAAuBD,WAAvB,OAAuBA,WAAvB,CAAoCD,mBAApC,OAAoCA,mBAApC,CAEA,MAAKJ,QAAL,CAAc,CACZM,aAAa,CAAbA,aADY,CAEZD,WAAW,CAAXA,WAFY,CAGZV,SAAS,CAATA,SAHY,CAIZa,oBAAoB,CAAED,SAAS,CAACY,KAAV,EAAmBhB,WAAW,CAACgB,KAJzC,CAKZf,mBAAmB,CAAnBA,mBALY,CAAd,EAOD,CAvPkB,OAyPnB8C,oBAzPmB,CAyPI,UAAM,CAC3B,0BAAgC,MAAKpC,KAAL,CAAWP,SAA3C,CAAQa,MAAR,uBAAQA,MAAR,CAAgBD,KAAhB,uBAAgBA,KAAhB,CAAuBU,CAAvB,uBAAuBA,CAAvB,CAA0BC,CAA1B,uBAA0BA,CAA1B,CAEA,GAAMqB,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvB,GAAI,MAAKtD,KAAL,CAAWuD,uBAAf,CAAwC,CACtC,MAAKvD,KAAL,CAAWwD,OAAX,GACD,CACF,CAJD,CAMA,MACE,MAAC,sBAAD,CAAwB,QAAxB,EAAiC,KAAK,CAAE,CAAEC,gBAAgB,CAAE,IAApB,CAAxC,UACE,KAAC,IAAD,EACE,UAAU,CAAEH,UADd,CAEE,aAAa,CAAE,MAAKtD,KAAL,CAAW0D,qBAAX,CAAmC,UAAnC,CAAgD,MAFjE,CAGE,KAAK,CAAE,CACL,CACEC,QAAQ,CAAE,UADZ,CAEEpC,MAAM,CAANA,MAFF,CAGED,KAAK,CAALA,KAHF,CAIE/B,GAAG,CAAE0C,CAJP,CAKExC,IAAI,CAAEuC,CALR,CAME4B,UAAU,CAAE,QANd,CAOEC,cAAc,CAAE,QAPlB,CADK,CAUL,MAAK7D,KAAL,CAAW8D,oBAVN,CAHT,UAgBG,MAAK9D,KAAL,CAAWoD,QAhBd,EADF,EADF,CAsBD,CAxRkB,OA0RnBW,uBA1RmB,CA0RO,UAAM,CAC9B,GAAMC,CAAAA,eAAe,CAAG5E,cAAc,CAAC,CACrCmB,mBAAmB,CAAE,MAAKU,KAAL,CAAWV,mBADK,CAErCC,WAAW,CAAE,MAAKS,KAAL,CAAWT,WAFa,CAGrCsC,SAAS,CAAE,MAAK9C,KAAL,CAAW8C,SAHe,CAIrC9B,aAAa,CAAE,MAAKC,KAAL,CAAWD,aAJW,CAKrCL,oBAAoB,CAAE,MAAKM,KAAL,CAAWN,oBALI,CAMrCsD,QAAQ,kBAAO,MAAKjE,KAAZ,CAN6B,CAOrCF,SAAS,CAAE,MAAKmB,KAAL,CAAWnB,SAPe,CAQrCW,aAAa,CAAE,MAAKQ,KAAL,CAAWR,aARW,CASrCyD,aAAa,CAAE,MAAKlE,KAAL,CAAWkE,aATW,CAAD,CAAtC,CAYA,GAAMC,CAAAA,WAAW,CAAG7F,KAAK,CAAC4E,QAAN,CAAeC,KAAf,CAAqB,MAAKnD,KAAL,CAAWoD,QAAhC,EAA4C,CAAhE,CAEA,GAAMgB,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAC3B,GAAI,MAAKpE,KAAL,CAAWqE,yBAAf,CAA0C,CACxC,MAAKrE,KAAL,CAAWwD,OAAX,GACD,CACF,CAJD,CAMA,MACE,MAAC,wBAAD,EACE,OAAO,CAAE,MAAKxD,KAAL,CAAWwD,OADtB,CAEE,UAAU,CAAE,MAAKxD,KAAL,CAAWsE,UAFzB,UAIE,MAAC,IAAD,EAAM,KAAK,CAAEN,eAAe,CAACO,cAA7B,WACE,KAAC,IAAD,EAAM,KAAK,CAAE,CAACP,eAAe,CAACQ,eAAjB,CAAb,UACE,MAAC,IAAD,EAAM,KAAK,CAAER,eAAe,CAACS,YAA7B,WACGN,WAAW,CAAG,KAAC,IAAD,EAAM,KAAK,CAAEH,eAAe,CAACU,UAA7B,EAAH,CAAiD,IAD/D,CAEE,KAAC,IAAD,EACE,QAAQ,CAAE,MAAKxD,cADjB,CAEE,KAAK,CAAE8C,eAAe,CAACW,YAFzB,UAIE,KAAC,wBAAD,EACE,OAAO,CAAEP,cADX,CAEE,UAAU,CAAE,MAAKpE,KAAL,CAAWsE,UAFzB,UAIG,MAAKtE,KAAL,CAAW4E,OAJd,EAJF,EAFF,GADF,EADF,CAiBGT,WAAW,EAAI,MAAKnE,KAAL,CAAW6E,kBAA1B,CACG,MAAKxB,oBAAL,EADH,CAEG,IAnBN,GAJF,EADF,CA4BD,CA3UkB,CAGjB,GAAQyB,CAAAA,SAAR,CAA6C9E,KAA7C,CAAQ8E,SAAR,CAAmBrC,qBAAnB,CAA6CzC,KAA7C,CAAmByC,qBAAnB,CAEA,MAAKd,gBAAL,CAAwB,KAAxB,CACA,MAAKe,kBAAL,CAA0B,IAA1B,CACA,MAAKqC,sBAAL,CAA8B,IAA9B,CAEA,MAAKlD,YAAL,CAAoBvD,KAAK,CAAC0G,SAAN,EAApB,CACA,MAAK/D,KAAL,CAAa,CAEXS,sBAAsB,CAAEoD,SAAS,EAAIrC,qBAF1B,CAGXnC,WAAW,CAAE,GAAI3B,CAAAA,IAAJ,CAAS,CAAT,CAAY,CAAZ,CAHF,CAIX4B,mBAAmB,CAAE,GAAI5B,CAAAA,IAAJ,CAAS,CAAT,CAAY,CAAZ,CAJV,CAKX6B,WAAW,CAAE,GAAI9B,CAAAA,KAAJ,CAAU,CAAV,CAAa,CAAb,CALF,CAMX+B,aAAa,CAAE,GAAI/B,CAAAA,KAAJ,CAAU,CAAV,CAAa,CAAb,CANJ,CAOXgC,SAAS,CAAE,GAAI9B,CAAAA,IAAJ,CAAS,CAAT,CAAY,CAAZ,CAAe,CAAf,CAAkB,CAAlB,CAPA,CAQXoC,aAAa,CAAErB,oBAAoB,CAACK,KAAK,CAACgB,aAAP,CARxB,CAWXlB,SAAS,CACPxB,KAAK,CAAC4E,QAAN,CAAeC,KAAf,CAAqBnD,KAAK,CAACoD,QAA3B,IAAyC,CAAzC,CACIvD,eAAe,CAACG,KAAK,CAACF,SAAP,CADnB,CAEIE,KAAK,CAACF,SAdD,CAeXa,oBAAoB,CAAE,KAfX,CAgBXP,UAAU,CAAE6E,UAAU,CAACC,GAAX,CAAe,QAAf,CAhBD,CAAb,CAViB,aA4BlB,C,qDAED,4BAAoB,CAClB,KAAKH,sBAAL,CAA8BE,UAAU,CAACE,gBAAX,CAC5B,QAD4B,CAE5B,KAAKlF,gBAFuB,CAA9B,CAID,C,kCAED,4BAAmBmF,SAAnB,CAA8BC,SAA9B,CAAyC,iBACvC,iBAA0C,KAAKrF,KAA/C,CAAQ4E,OAAR,cAAQA,OAAR,CAAiBE,SAAjB,cAAiBA,SAAjB,CAA4BhF,SAA5B,cAA4BA,SAA5B,CACA,GAAQkB,CAAAA,aAAR,CAA0B,KAAKC,KAA/B,CAAQD,aAAR,CAEA,GAAMsE,CAAAA,cAAc,CAAG,CAAC7G,UAAU,CAAC2G,SAAS,CAACR,OAAX,CAAoBA,OAApB,CAAlC,CACA,GAAMW,CAAAA,gBAAgB,CAAGH,SAAS,CAACtF,SAAV,GAAwBA,SAAjD,CACA,GAAM0F,CAAAA,aAAa,CAAGV,SAAS,EAAI,CAACM,SAAS,CAACN,SAA9C,CACA,GAAMW,CAAAA,aAAa,CAAG,CAAChH,UAAU,CAAC4G,SAAS,CAACrE,aAAX,CAA0BA,aAA1B,CAAjC,CAEA,GAAIsE,cAAc,EAAIC,gBAAlB,EAAsCC,aAAtC,EAAuDC,aAA3D,CAA0E,CACxE7E,UAAU,CAAC,UAAM,CACf,MAAI,CAACC,gBAAL,GACD,CAFS,CAAV,CAGD,CACF,C,oCAED,+BAAuB,2BAGrB,0BAAI,KAAKkE,sBAAT,SAAI,sBAA6BW,MAAjC,CAAyC,CAEvC,KAAKX,sBAAL,CAA4BW,MAA5B,GACD,CAHD,IAGO,CAELT,UAAU,CAACU,mBAAX,CAA+B,QAA/B,CAAyC,KAAK1F,gBAA9C,EACD,CAED,GAAI,KAAKyC,kBAAT,CAA6B,CAC3B,KAAKA,kBAAL,CAAwBC,MAAxB,GACD,CACF,C,sBA0QD,iBAAS,CACP,iBAKI,KAAK3C,KALT,CACEoD,QADF,cACEA,QADF,CAEE0B,SAFF,cAEEA,SAFF,CAGEc,mBAHF,cAGEA,mBAHF,CAIEC,cAJF,cAIEA,cAJF,CAOA,GAAM1B,CAAAA,WAAW,CAAG7F,KAAK,CAAC4E,QAAN,CAAeC,KAAf,CAAqBC,QAArB,EAAiC,CAArD,CACA,GAAM0C,CAAAA,WAAW,CAAGhB,SAAS,EAAI,CAAC,KAAK7D,KAAL,CAAWS,sBAA7C,CACA,GAAMqE,CAAAA,cAAc,CAAGF,cAAc,EAAIG,KAAzC,CAEA,MACE,OAAC,KAAD,CAAO,QAAP,YACGJ,mBAAmB,CAClB,KAAC,cAAD,EACE,WAAW,KADb,CAEE,OAAO,CAAEE,WAFX,CAGE,cAAc,CAAE,KAAK9F,KAAL,CAAWwD,OAH7B,CAIE,qBAAqB,CAAE,KAAKxD,KAAL,CAAWiG,qBAJpC,UAMG,KAAKlC,uBAAL,EANH,EADkB,CAShB,IAVN,CAaGI,WAAW,CACV,KAAC,IAAD,EACE,GAAG,CAAE,KAAKtC,YADZ,CAEE,QAAQ,CAAE,KAAKhB,gBAFjB,CAGE,KAAK,CAAE,KAAKb,KAAL,CAAWkG,kBAHpB,UAKG9C,QALH,EADU,CAQR,IArBN,CAuBG,CAACwC,mBAAD,EAAwBE,WAAxB,CACG,KAAK/B,uBAAL,EADH,CAEG,IAzBN,GADF,CA6BD,C,0CAjTD,kCAAgCoC,SAAhC,CAA2Cd,SAA3C,CAAsD,CACpD,GAAMe,CAAAA,SAAS,CAAG,EAAlB,CAGA,GAAMC,CAAAA,aAAa,CACjB/H,KAAK,CAAC4E,QAAN,CAAeC,KAAf,CAAqBgD,SAAS,CAAC/C,QAA/B,IAA6C,CAA7C,CACIvD,eAAe,CAACsG,SAAS,CAACrG,SAAX,CADnB,CAEIqG,SAAS,CAACrG,SAHhB,CAKA,GAAIuG,aAAa,GAAKhB,SAAS,CAACvF,SAAhC,CAA2C,CACzCsG,SAAS,CAACtG,SAAV,CAAsBuG,aAAtB,CACD,CAGD,GAAMC,CAAAA,iBAAiB,CAAG3G,oBAAoB,CAACwG,SAAS,CAACnF,aAAX,CAA9C,CACA,GAAI,CAACvC,UAAU,CAAC6H,iBAAD,CAAoBjB,SAAS,CAACrE,aAA9B,CAAf,CAA6D,CAC3DoF,SAAS,CAACpF,aAAV,CAA0BsF,iBAA1B,CACD,CAGD,GAAIjB,SAAS,CAAC1E,oBAAV,EAAkC,CAACwF,SAAS,CAACrB,SAAjD,CAA4D,CAC1DsB,SAAS,CAACzF,oBAAV,CAAiC,KAAjC,CACAyF,SAAS,CAAC7F,mBAAV,CAAgC,GAAI5B,CAAAA,IAAJ,CAAS,CAAT,CAAY,CAAZ,CAAhC,CACD,CAED,GAAIyD,MAAM,CAACmE,IAAP,CAAYH,SAAZ,EAAuBI,MAA3B,CAAmC,CACjC,MAAOJ,CAAAA,SAAP,CACD,CAED,MAAO,KAAP,CACD,C,qBA5JmB7H,S,EAAhBwB,O,CACG0G,Y,CAAe,CACpB/C,qBAAqB,CAAE,IADH,CAEpBZ,SAAS,CAAE,GAAInE,CAAAA,IAAJ,CAAS,EAAT,CAAa,CAAb,CAFS,CAGpB+H,eAAe,CAAE,iBAHG,CAIpB3D,mBAAmB,CAAE,CAJD,CAKpBK,QAAQ,CAAE,IALU,CAMpBG,uBAAuB,CAAE,IANL,CAOpBc,yBAAyB,CAAE,IAPP,CAQpBO,OAAO,CAAE,KAAC,IAAD,IARW,CASpB5D,aAAa,CAAE,EATK,CAUpB2F,aAAa,CAAE,KAVK,CAWpB7B,SAAS,CAAE,KAXS,CAYpBtB,OAAO,CAAE,kBAAM,CACboD,OAAO,CAACC,IAAR,CACE,8DADF,EAGD,CAhBmB,CAiBpB/G,SAAS,CAAE,QAjBS,CAkBpB+E,kBAAkB,CAAE,IAlBA,CAmBpBoB,qBAAqB,CAAE,CAAC,UAAD,CAAa,WAAb,CAnBH,CAoBpBxD,qBAAqB,CAAE,KApBH,CAqBpBmD,mBAAmB,CAAE,IArBD,CAsBpB1B,aAAa,CAAE,CAtBK,CAuBpBI,UAAU,CAAE,IAvBQ,C,CADlBvE,O,CA2BG+G,S,CAAY,CACjBpD,qBAAqB,CAAElF,SAAS,CAACuI,IADhB,CAEjBjE,SAAS,CAAEtE,SAAS,CAACwI,KAAV,CAAgB,CACzBzF,MAAM,CAAE/C,SAAS,CAACyI,MADO,CAEzB3F,KAAK,CAAE9C,SAAS,CAACyI,MAFQ,CAAhB,CAFM,CAMjBP,eAAe,CAAElI,SAAS,CAAC0I,MANV,CAOjBnE,mBAAmB,CAAEvE,SAAS,CAACyI,MAPd,CAQjB7D,QAAQ,CAAE5E,SAAS,CAAC2I,SAAV,CAAoB,CAAC3I,SAAS,CAAC4I,IAAX,CAAiB5I,SAAS,CAAC6I,IAA3B,CAApB,CARO,CASjB9D,uBAAuB,CAAE/E,SAAS,CAACuI,IATlB,CAUjB1C,yBAAyB,CAAE7F,SAAS,CAACuI,IAVpB,CAWjBnC,OAAO,CAAEpG,SAAS,CAAC2I,SAAV,CAAoB,CAAC3I,SAAS,CAAC4I,IAAX,CAAiB5I,SAAS,CAAC6I,IAA3B,CAApB,CAXQ,CAYjBrG,aAAa,CAAExC,SAAS,CAACwI,KAAV,CAAgB,CAC7BzH,GAAG,CAAEf,SAAS,CAACyI,MADc,CAE7BzH,MAAM,CAAEhB,SAAS,CAACyI,MAFW,CAG7BxH,IAAI,CAAEjB,SAAS,CAACyI,MAHa,CAI7BvH,KAAK,CAAElB,SAAS,CAACyI,MAJY,CAAhB,CAZE,CAkBjBN,aAAa,CAAEnI,SAAS,CAACuI,IAlBR,CAmBjBjC,SAAS,CAAEtG,SAAS,CAACuI,IAnBJ,CAoBjBvD,OAAO,CAAEhF,SAAS,CAAC6I,IApBF,CAqBjBvH,SAAS,CAAEtB,SAAS,CAAC8I,KAAV,CAAgB,CAAC,KAAD,CAAQ,MAAR,CAAgB,QAAhB,CAA0B,OAA1B,CAAmC,QAAnC,CAAhB,CArBM,CAsBjBzC,kBAAkB,CAAErG,SAAS,CAACuI,IAtBb,CAuBjBd,qBAAqB,CAAEzH,SAAS,CAAC+I,OAAV,CAAkB/I,SAAS,CAAC0I,MAA5B,CAvBN,CAwBjBzE,qBAAqB,CAAEjE,SAAS,CAACuI,IAxBhB,CAyBjBnB,mBAAmB,CAAEpH,SAAS,CAACuI,IAzBd,CA0BjB7C,aAAa,CAAE1F,SAAS,CAACyI,MA1BR,CA2BjB3C,UAAU,CAAE9F,SAAS,CAACuI,IA3BL,C,CAuZrB,cAAehH,CAAAA,OAAf","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Dimensions,\n  InteractionManager,\n  Modal,\n  TouchableWithoutFeedback,\n  View,\n} from 'react-native';\nimport rfcIsEqual from 'react-fast-compare';\nimport {\n  Point,\n  Size,\n  Rect,\n  swapSizeDimmensions,\n  makeChildlessRect,\n  computeCenterGeometry,\n  computeTopGeometry,\n  computeBottomGeometry,\n  computeLeftGeometry,\n  computeRightGeometry,\n} from './geom';\nimport styleGenerator from './styles';\nimport TooltipChildrenContext from './tooltip-children.context';\n\nexport { TooltipChildrenContext };\n\nconst DEFAULT_DISPLAY_INSETS = {\n  top: 24,\n  bottom: 24,\n  left: 24,\n  right: 24,\n};\n\nconst computeDisplayInsets = insetsFromProps =>\n  Object.assign({}, DEFAULT_DISPLAY_INSETS, insetsFromProps);\n\nconst invertPlacement = placement => {\n  switch (placement) {\n    case 'top':\n      return 'bottom';\n    case 'bottom':\n      return 'top';\n    case 'right':\n      return 'left';\n    case 'left':\n      return 'right';\n    default:\n      return placement;\n  }\n};\n\nclass Tooltip extends Component {\n  static defaultProps = {\n    allowChildInteraction: true,\n    arrowSize: new Size(16, 8),\n    backgroundColor: 'rgba(0,0,0,0.5)',\n    childContentSpacing: 4,\n    children: null,\n    closeOnChildInteraction: true,\n    closeOnContentInteraction: true,\n    content: <View />,\n    displayInsets: {},\n    disableShadow: false,\n    isVisible: false,\n    onClose: () => {\n      console.warn(\n        '[react-native-walkthrough-tooltip] onClose prop not provided',\n      );\n    },\n    placement: 'center', // falls back to \"top\" if there ARE children\n    showChildInTooltip: true,\n    supportedOrientations: ['portrait', 'landscape'],\n    useInteractionManager: false,\n    useReactNativeModal: true,\n    topAdjustment: 0,\n    accessible: true,\n  };\n\n  static propTypes = {\n    allowChildInteraction: PropTypes.bool,\n    arrowSize: PropTypes.shape({\n      height: PropTypes.number,\n      width: PropTypes.number,\n    }),\n    backgroundColor: PropTypes.string,\n    childContentSpacing: PropTypes.number,\n    children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    closeOnChildInteraction: PropTypes.bool,\n    closeOnContentInteraction: PropTypes.bool,\n    content: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    displayInsets: PropTypes.shape({\n      top: PropTypes.number,\n      bottom: PropTypes.number,\n      left: PropTypes.number,\n      right: PropTypes.number,\n    }),\n    disableShadow: PropTypes.bool,\n    isVisible: PropTypes.bool,\n    onClose: PropTypes.func,\n    placement: PropTypes.oneOf(['top', 'left', 'bottom', 'right', 'center']),\n    showChildInTooltip: PropTypes.bool,\n    supportedOrientations: PropTypes.arrayOf(PropTypes.string),\n    useInteractionManager: PropTypes.bool,\n    useReactNativeModal: PropTypes.bool,\n    topAdjustment: PropTypes.number,\n    accessible: PropTypes.bool,\n  };\n\n  constructor(props) {\n    super(props);\n\n    const { isVisible, useInteractionManager } = props;\n\n    this.isMeasuringChild = false;\n    this.interactionPromise = null;\n    this.dimensionsSubscription = null;\n\n    this.childWrapper = React.createRef();\n    this.state = {\n      // no need to wait for interactions if not visible initially\n      waitingForInteractions: isVisible && useInteractionManager,\n      contentSize: new Size(0, 0),\n      adjustedContentSize: new Size(0, 0),\n      anchorPoint: new Point(0, 0),\n      tooltipOrigin: new Point(0, 0),\n      childRect: new Rect(0, 0, 0, 0),\n      displayInsets: computeDisplayInsets(props.displayInsets),\n      // if we have no children, and place the tooltip at the \"top\" we want it to\n      // behave like placement \"bottom\", i.e. display below the top of the screen\n      placement:\n        React.Children.count(props.children) === 0\n          ? invertPlacement(props.placement)\n          : props.placement,\n      measurementsFinished: false,\n      windowDims: Dimensions.get('window'),\n    };\n  }\n\n  componentDidMount() {\n    this.dimensionsSubscription = Dimensions.addEventListener(\n      'change',\n      this.updateWindowDims,\n    );\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { content, isVisible, placement } = this.props;\n    const { displayInsets } = this.state;\n\n    const contentChanged = !rfcIsEqual(prevProps.content, content);\n    const placementChanged = prevProps.placement !== placement;\n    const becameVisible = isVisible && !prevProps.isVisible;\n    const insetsChanged = !rfcIsEqual(prevState.displayInsets, displayInsets);\n\n    if (contentChanged || placementChanged || becameVisible || insetsChanged) {\n      setTimeout(() => {\n        this.measureChildRect();\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    // removeEventListener deprecated\n    // https://reactnative.dev/docs/dimensions#removeeventlistener\n    if (this.dimensionsSubscription?.remove) {\n      // react native >= 0.65.*\n      this.dimensionsSubscription.remove();\n    } else {\n      // react native < 0.65.*\n      Dimensions.removeEventListener('change', this.updateWindowDims);\n    }\n\n    if (this.interactionPromise) {\n      this.interactionPromise.cancel();\n    }\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const nextState = {};\n\n    // update placement in state if the prop changed\n    const nextPlacement =\n      React.Children.count(nextProps.children) === 0\n        ? invertPlacement(nextProps.placement)\n        : nextProps.placement;\n\n    if (nextPlacement !== prevState.placement) {\n      nextState.placement = nextPlacement;\n    }\n\n    // update computed display insets if they changed\n    const nextDisplayInsets = computeDisplayInsets(nextProps.displayInsets);\n    if (!rfcIsEqual(nextDisplayInsets, prevState.displayInsets)) {\n      nextState.displayInsets = nextDisplayInsets;\n    }\n\n    // set measurements finished flag to false when tooltip closes\n    if (prevState.measurementsFinished && !nextProps.isVisible) {\n      nextState.measurementsFinished = false;\n      nextState.adjustedContentSize = new Size(0, 0);\n    }\n\n    if (Object.keys(nextState).length) {\n      return nextState;\n    }\n\n    return null;\n  }\n\n  updateWindowDims = dims => {\n    this.setState(\n      {\n        windowDims: dims.window,\n        contentSize: new Size(0, 0),\n        adjustedContentSize: new Size(0, 0),\n        anchorPoint: new Point(0, 0),\n        tooltipOrigin: new Point(0, 0),\n        childRect: new Rect(0, 0, 0, 0),\n        measurementsFinished: false,\n      },\n      () => {\n        setTimeout(() => {\n          this.measureChildRect();\n        }, 500); // give the rotation a moment to finish\n      },\n    );\n  };\n\n  doChildlessPlacement = () => {\n    this.onChildMeasurementComplete(\n      makeChildlessRect({\n        displayInsets: this.state.displayInsets,\n        placement: this.state.placement, // MUST use from state, not props\n        windowDims: this.state.windowDims,\n      }),\n    );\n  };\n\n  measureContent = e => {\n    const { width, height } = e.nativeEvent.layout;\n    const contentSize = new Size(width, height);\n    this.setState({ contentSize }, () => {\n      this.computeGeometry();\n    });\n  };\n\n  onChildMeasurementComplete = rect => {\n    this.setState(\n      {\n        childRect: rect,\n        waitingForInteractions: false,\n      },\n      () => {\n        this.isMeasuringChild = false;\n        if (this.state.contentSize.width) {\n          this.computeGeometry();\n        }\n      },\n    );\n  };\n\n  measureChildRect = () => {\n    const doMeasurement = () => {\n      if (!this.isMeasuringChild) {\n        this.isMeasuringChild = true;\n        if (\n          this.childWrapper.current &&\n          typeof this.childWrapper.current.measure === 'function'\n        ) {\n          this.childWrapper.current.measure(\n            (x, y, width, height, pageX, pageY) => {\n              const childRect = new Rect(pageX, pageY, width, height);\n              if (\n                Object.values(childRect).every(value => value !== undefined)\n              ) {\n                this.onChildMeasurementComplete(childRect);\n              } else {\n                this.doChildlessPlacement();\n              }\n            },\n          );\n        } else {\n          this.doChildlessPlacement();\n        }\n      }\n    };\n\n    if (this.props.useInteractionManager) {\n      if (this.interactionPromise) {\n        this.interactionPromise.cancel();\n      }\n      this.interactionPromise = InteractionManager.runAfterInteractions(() => {\n        doMeasurement();\n      });\n    } else {\n      doMeasurement();\n    }\n  };\n\n  computeGeometry = () => {\n    const { arrowSize, childContentSpacing } = this.props;\n    const {\n      childRect,\n      contentSize,\n      displayInsets,\n      placement,\n      windowDims,\n    } = this.state;\n\n    const options = {\n      displayInsets,\n      childRect,\n      windowDims,\n      arrowSize:\n        placement === 'top' || placement === 'bottom'\n          ? arrowSize\n          : swapSizeDimmensions(arrowSize),\n      contentSize,\n      childContentSpacing,\n    };\n\n    let geom = computeTopGeometry(options);\n\n    // special case for centered, childless placement tooltip\n    if (\n      placement === 'center' &&\n      React.Children.count(this.props.children) === 0\n    ) {\n      geom = computeCenterGeometry(options);\n    } else {\n      switch (placement) {\n        case 'bottom':\n          geom = computeBottomGeometry(options);\n          break;\n        case 'left':\n          geom = computeLeftGeometry(options);\n          break;\n        case 'right':\n          geom = computeRightGeometry(options);\n          break;\n        case 'top':\n        default:\n          break; // computed just above if-else-block\n      }\n    }\n\n    const { tooltipOrigin, anchorPoint, adjustedContentSize } = geom;\n\n    this.setState({\n      tooltipOrigin,\n      anchorPoint,\n      placement,\n      measurementsFinished: childRect.width && contentSize.width,\n      adjustedContentSize,\n    });\n  };\n\n  renderChildInTooltip = () => {\n    const { height, width, x, y } = this.state.childRect;\n\n    const onTouchEnd = () => {\n      if (this.props.closeOnChildInteraction) {\n        this.props.onClose();\n      }\n    };\n\n    return (\n      <TooltipChildrenContext.Provider value={{ tooltipDuplicate: true }}>\n        <View\n          onTouchEnd={onTouchEnd}\n          pointerEvents={this.props.allowChildInteraction ? 'box-none' : 'none'}\n          style={[\n            {\n              position: 'absolute',\n              height,\n              width,\n              top: y,\n              left: x,\n              alignItems: 'center',\n              justifyContent: 'center',\n            },\n            this.props.childrenWrapperStyle,\n          ]}\n        >\n          {this.props.children}\n        </View>\n      </TooltipChildrenContext.Provider>\n    );\n  };\n\n  renderContentForTooltip = () => {\n    const generatedStyles = styleGenerator({\n      adjustedContentSize: this.state.adjustedContentSize,\n      anchorPoint: this.state.anchorPoint,\n      arrowSize: this.props.arrowSize,\n      displayInsets: this.state.displayInsets,\n      measurementsFinished: this.state.measurementsFinished,\n      ownProps: { ...this.props },\n      placement: this.state.placement,\n      tooltipOrigin: this.state.tooltipOrigin,\n      topAdjustment: this.props.topAdjustment,\n    });\n\n    const hasChildren = React.Children.count(this.props.children) > 0;\n\n    const onPressContent = () => {\n      if (this.props.closeOnContentInteraction) {\n        this.props.onClose();\n      }\n    };\n\n    return (\n      <TouchableWithoutFeedback\n        onPress={this.props.onClose}\n        accessible={this.props.accessible}\n      >\n        <View style={generatedStyles.containerStyle}>\n          <View style={[generatedStyles.backgroundStyle]}>\n            <View style={generatedStyles.tooltipStyle}>\n              {hasChildren ? <View style={generatedStyles.arrowStyle} /> : null}\n              <View\n                onLayout={this.measureContent}\n                style={generatedStyles.contentStyle}\n              >\n                <TouchableWithoutFeedback\n                  onPress={onPressContent}\n                  accessible={this.props.accessible}\n                >\n                  {this.props.content}\n                </TouchableWithoutFeedback>\n              </View>\n            </View>\n          </View>\n          {hasChildren && this.props.showChildInTooltip\n            ? this.renderChildInTooltip()\n            : null}\n        </View>\n      </TouchableWithoutFeedback>\n    );\n  };\n\n  render() {\n    const {\n      children,\n      isVisible,\n      useReactNativeModal,\n      modalComponent,\n    } = this.props;\n\n    const hasChildren = React.Children.count(children) > 0;\n    const showTooltip = isVisible && !this.state.waitingForInteractions;\n    const ModalComponent = modalComponent || Modal;\n\n    return (\n      <React.Fragment>\n        {useReactNativeModal ? (\n          <ModalComponent\n            transparent\n            visible={showTooltip}\n            onRequestClose={this.props.onClose}\n            supportedOrientations={this.props.supportedOrientations}\n          >\n            {this.renderContentForTooltip()}\n          </ModalComponent>\n        ) : null}\n\n        {/* This renders the child element in place in the parent's layout */}\n        {hasChildren ? (\n          <View\n            ref={this.childWrapper}\n            onLayout={this.measureChildRect}\n            style={this.props.parentWrapperStyle}\n          >\n            {children}\n          </View>\n        ) : null}\n\n        {!useReactNativeModal && showTooltip\n          ? this.renderContentForTooltip()\n          : null}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Tooltip;\n"]},"metadata":{},"sourceType":"module"}