{"ast":null,"code":"function _createForOfIteratorHelperLoose(o,allowArrayLike){var it=typeof Symbol!==\"undefined\"&&o[Symbol.iterator]||o[\"@@iterator\"];if(it)return(it=it.call(o)).next.bind(it);if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length===\"number\"){if(it)o=it;var i=0;return function(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};};}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o===\"string\")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n===\"Object\"&&o.constructor)n=o.constructor.name;if(n===\"Map\"||n===\"Set\")return Array.from(o);if(n===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}import{useEffect,useRef}from'react';import{processColor}from\"../Colors\";import{makeRemote}from\"../core\";import{isWeb}from\"../PlatformChecker\";import{colorProps}from\"../UpdateProps\";import WorkletEventHandler from\"../WorkletEventHandler\";export function useEvent(handler){var eventNames=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var rebuild=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var initRef=useRef(null);if(initRef.current===null){initRef.current=new WorkletEventHandler(handler,eventNames);}else if(rebuild){initRef.current.updateWorklet(handler);}useEffect(function(){return function(){initRef.current=null;};},[]);return initRef;}export function useHandler(handlers,dependencies){var initRef=useRef(null);if(initRef.current===null){initRef.current={context:makeRemote({}),savedDependencies:[]};}useEffect(function(){return function(){initRef.current=null;};},[]);var _initRef$current=initRef.current,context=_initRef$current.context,savedDependencies=_initRef$current.savedDependencies;dependencies=buildDependencies(dependencies,handlers);var doDependenciesDiffer=!areDependenciesEqual(dependencies,savedDependencies);initRef.current.savedDependencies=dependencies;var useWeb=isWeb();return{context:context,doDependenciesDiffer:doDependenciesDiffer,useWeb:useWeb};}export function buildWorkletsHash(handlers){return Object.values(handlers).reduce(function(acc,worklet){return acc+worklet.__workletHash.toString();},'');}export function buildDependencies(dependencies,handlers){var handlersList=Object.values(handlers).filter(function(handler){return handler!==undefined;});if(!dependencies){dependencies=handlersList.map(function(handler){return{workletHash:handler.__workletHash,closure:handler._closure};});}else{dependencies.push(buildWorkletsHash(handlersList));}return dependencies;}export function areDependenciesEqual(nextDeps,prevDeps){function is(x,y){return x===y&&(x!==0||1/x===1/y)||x!==x&&y!==y;}var objectIs=typeof Object.is==='function'?Object.is:is;function areHookInputsEqual(nextDeps,prevDeps){if(!nextDeps||!prevDeps||prevDeps.length!==nextDeps.length){return false;}for(var i=0;i<prevDeps.length;++i){if(!objectIs(nextDeps[i],prevDeps[i])){return false;}}return true;}return areHookInputsEqual(nextDeps,prevDeps);}export function hasColorProps(updates){var colorPropsSet=new Set(colorProps);for(var key in updates){if(colorPropsSet.has(key)){return true;}}return false;}export var parseColors=function(){var _f=function _f(updates){for(var key in updates){if(colorProps.indexOf(key)!==-1){updates[key]=processColor(updates[key]);}}};_f._closure={colorProps:colorProps,processColor:processColor};_f.asString=\"function parseColors(updates){const{colorProps,processColor}=jsThis._closure;{for(const key in updates){if(colorProps.indexOf(key)!==-1){updates[key]=processColor(updates[key]);}}}}\";_f.__workletHash=17387930022045;_f.__location=\"/Users/mas/Documents/perso/expo-splashscreen-generator/node_modules/react-native-reanimated/lib/reanimated2/hook/utils.js (94:7)\";global.__reanimatedWorkletInit(_f);return _f;}();export function canApplyOptimalisation(upadterFn){var FUNCTIONLESS_FLAG=1;var STATEMENTLESS_FLAG=2;var optimalization=upadterFn.__optimalization;return optimalization&FUNCTIONLESS_FLAG&&optimalization&STATEMENTLESS_FLAG;}export var isAnimated=function(){var _f=function _f(prop){var propsToCheck=[prop];while(propsToCheck.length>0){var currentProp=propsToCheck.pop();if(Array.isArray(currentProp)){for(var _iterator=_createForOfIteratorHelperLoose(currentProp),_step;!(_step=_iterator()).done;){var item=_step.value;propsToCheck.push(item);}}else if((currentProp===null||currentProp===void 0?void 0:currentProp.onFrame)!==undefined){return true;}else if(typeof currentProp==='object'){for(var _i=0,_Object$values=Object.values(currentProp);_i<_Object$values.length;_i++){var _item=_Object$values[_i];propsToCheck.push(_item);}}}return false;};_f._closure={};_f.asString=\"function isAnimated(prop){const propsToCheck=[prop];while(propsToCheck.length>0){const currentProp=propsToCheck.pop();if(Array.isArray(currentProp)){for(const item of currentProp){propsToCheck.push(item);}}else if((currentProp===null||currentProp===void 0?void 0:currentProp.onFrame)!==undefined){return true;}else if(typeof currentProp==='object'){for(const item of Object.values(currentProp)){propsToCheck.push(item);}}}return false;}\";_f.__workletHash=3559579197933;_f.__location=\"/Users/mas/Documents/perso/expo-splashscreen-generator/node_modules/react-native-reanimated/lib/reanimated2/hook/utils.js (109:7)\";global.__reanimatedWorkletInit(_f);return _f;}();export var styleDiff=function(){var _f=function _f(oldStyle,newStyle){var diff={};Object.keys(oldStyle).forEach(function(key){if(newStyle[key]===undefined){diff[key]=null;}});Object.keys(newStyle).forEach(function(key){var value=newStyle[key];var oldValue=oldStyle[key];if(isAnimated(value)){return;}if(oldValue!==value&&JSON.stringify(oldValue)!==JSON.stringify(value)){diff[key]=value;}});return diff;};_f._closure={isAnimated:isAnimated};_f.asString=\"function styleDiff(oldStyle,newStyle){const{isAnimated}=jsThis._closure;{const diff={};Object.keys(oldStyle).forEach(function(key){if(newStyle[key]===undefined){diff[key]=null;}});Object.keys(newStyle).forEach(function(key){const value=newStyle[key];const oldValue=oldStyle[key];if(isAnimated(value)){return;}if(oldValue!==value&&JSON.stringify(oldValue)!==JSON.stringify(value)){diff[key]=value;}});return diff;}}\";_f.__workletHash=3422813503390;_f.__location=\"/Users/mas/Documents/perso/expo-splashscreen-generator/node_modules/react-native-reanimated/lib/reanimated2/hook/utils.js (132:7)\";global.__reanimatedWorkletInit(_f);return _f;}();export var getStyleWithoutAnimations=function(){var _f=function _f(newStyle){var diff={};for(var key in newStyle){var value=newStyle[key];if(isAnimated(value)){continue;}diff[key]=value;}return diff;};_f._closure={isAnimated:isAnimated};_f.asString=\"function getStyleWithoutAnimations(newStyle){const{isAnimated}=jsThis._closure;{const diff={};for(const key in newStyle){const value=newStyle[key];if(isAnimated(value)){continue;}diff[key]=value;}return diff;}}\";_f.__workletHash=2190466090064;_f.__location=\"/Users/mas/Documents/perso/expo-splashscreen-generator/node_modules/react-native-reanimated/lib/reanimated2/hook/utils.js (155:7)\";global.__reanimatedWorkletInit(_f);return _f;}();export var validateAnimatedStyles=function(){var _f=function _f(styles){if(typeof styles!=='object'){throw new Error(\"useAnimatedStyle has to return an object, found \"+typeof styles+\" instead\");}else if(Array.isArray(styles)){throw new Error('useAnimatedStyle has to return an object and cannot return static styles combined with dynamic ones. Please do merging where a component receives props.');}};_f._closure={};_f.asString=\"function _f(styles){if(typeof styles!=='object'){throw new Error(\\\"useAnimatedStyle has to return an object, found \\\"+typeof styles+\\\" instead\\\");}else if(Array.isArray(styles)){throw new Error('useAnimatedStyle has to return an object and cannot return static styles combined with dynamic ones. Please do merging where a component receives props.');}}\";_f.__workletHash=316286613811;_f.__location=\"/Users/mas/Documents/perso/expo-splashscreen-generator/node_modules/react-native-reanimated/lib/reanimated2/hook/utils.js (167:38)\";global.__reanimatedWorkletInit(_f);return _f;}();","map":{"version":3,"sources":["/Users/mas/Documents/perso/expo-splashscreen-generator/node_modules/react-native-reanimated/lib/reanimated2/hook/utils.js"],"names":["useEffect","useRef","processColor","makeRemote","isWeb","colorProps","WorkletEventHandler","useEvent","handler","eventNames","rebuild","initRef","current","updateWorklet","useHandler","handlers","dependencies","context","savedDependencies","buildDependencies","doDependenciesDiffer","areDependenciesEqual","useWeb","buildWorkletsHash","Object","values","reduce","acc","worklet","__workletHash","toString","handlersList","filter","undefined","map","workletHash","closure","_closure","push","nextDeps","prevDeps","is","x","y","objectIs","areHookInputsEqual","length","i","hasColorProps","updates","colorPropsSet","Set","key","has","parseColors","indexOf","canApplyOptimalisation","upadterFn","FUNCTIONLESS_FLAG","STATEMENTLESS_FLAG","optimalization","__optimalization","isAnimated","prop","propsToCheck","currentProp","pop","Array","isArray","item","onFrame","styleDiff","oldStyle","newStyle","diff","keys","forEach","value","oldValue","JSON","stringify","getStyleWithoutAnimations","validateAnimatedStyles","styles","Error"],"mappings":"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","sourcesContent":["import { useEffect, useRef } from 'react';\nimport { processColor } from '../Colors';\nimport { makeRemote } from '../core';\nimport { isWeb } from '../PlatformChecker';\nimport { colorProps } from '../UpdateProps';\nimport WorkletEventHandler from '../WorkletEventHandler';\nexport function useEvent(handler, eventNames = [], rebuild = false) {\n    const initRef = useRef(null);\n    if (initRef.current === null) {\n        initRef.current = new WorkletEventHandler(handler, eventNames);\n    }\n    else if (rebuild) {\n        initRef.current.updateWorklet(handler);\n    }\n    useEffect(() => {\n        return () => {\n            initRef.current = null;\n        };\n    }, []);\n    return initRef;\n}\nexport function useHandler(handlers, dependencies) {\n    const initRef = useRef(null);\n    if (initRef.current === null) {\n        initRef.current = {\n            context: makeRemote({}),\n            savedDependencies: [],\n        };\n    }\n    useEffect(() => {\n        return () => {\n            initRef.current = null;\n        };\n    }, []);\n    const { context, savedDependencies } = initRef.current;\n    dependencies = buildDependencies(dependencies, handlers);\n    const doDependenciesDiffer = !areDependenciesEqual(dependencies, savedDependencies);\n    initRef.current.savedDependencies = dependencies;\n    const useWeb = isWeb();\n    return { context, doDependenciesDiffer, useWeb };\n}\n// builds one big hash from multiple worklets' hashes\nexport function buildWorkletsHash(handlers) {\n    return Object.values(handlers).reduce((acc, worklet) => \n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    acc + worklet.__workletHash.toString(), '');\n}\n// builds dependencies array for gesture handlers\nexport function buildDependencies(dependencies, handlers) {\n    const handlersList = Object.values(handlers).filter((handler) => handler !== undefined);\n    if (!dependencies) {\n        dependencies = handlersList.map((handler) => {\n            return {\n                workletHash: handler.__workletHash,\n                closure: handler._closure,\n            };\n        });\n    }\n    else {\n        dependencies.push(buildWorkletsHash(handlersList));\n    }\n    return dependencies;\n}\n// this is supposed to work as useEffect comparison\nexport function areDependenciesEqual(nextDeps, prevDeps) {\n    function is(x, y) {\n        /* eslint-disable no-self-compare */\n        return (x === y && (x !== 0 || 1 / x === 1 / y)) || (x !== x && y !== y);\n        /* eslint-enable no-self-compare */\n    }\n    const objectIs = typeof Object.is === 'function' ? Object.is : is;\n    function areHookInputsEqual(nextDeps, prevDeps) {\n        if (!nextDeps || !prevDeps || prevDeps.length !== nextDeps.length) {\n            return false;\n        }\n        for (let i = 0; i < prevDeps.length; ++i) {\n            if (!objectIs(nextDeps[i], prevDeps[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return areHookInputsEqual(nextDeps, prevDeps);\n}\nexport function hasColorProps(updates) {\n    const colorPropsSet = new Set(colorProps);\n    for (const key in updates) {\n        if (colorPropsSet.has(key)) {\n            return true;\n        }\n    }\n    return false;\n}\nexport function parseColors(updates) {\n    'worklet';\n    for (const key in updates) {\n        if (colorProps.indexOf(key) !== -1) {\n            updates[key] = processColor(updates[key]);\n        }\n    }\n}\nexport function canApplyOptimalisation(upadterFn) {\n    const FUNCTIONLESS_FLAG = 0b00000001;\n    const STATEMENTLESS_FLAG = 0b00000010;\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const optimalization = upadterFn.__optimalization;\n    return (optimalization & FUNCTIONLESS_FLAG && optimalization & STATEMENTLESS_FLAG);\n}\nexport function isAnimated(prop) {\n    'worklet';\n    const propsToCheck = [prop];\n    while (propsToCheck.length > 0) {\n        const currentProp = propsToCheck.pop();\n        if (Array.isArray(currentProp)) {\n            for (const item of currentProp) {\n                propsToCheck.push(item);\n            }\n        }\n        else if ((currentProp === null || currentProp === void 0 ? void 0 : currentProp.onFrame) !== undefined) {\n            return true;\n        }\n        else if (typeof currentProp === 'object') {\n            for (const item of Object.values(currentProp)) {\n                propsToCheck.push(item);\n            }\n        }\n        // if none of the above, it's not the animated prop, check next one\n    }\n    // when none of the props were animated return false\n    return false;\n}\nexport function styleDiff(oldStyle, newStyle) {\n    'worklet';\n    const diff = {};\n    Object.keys(oldStyle).forEach((key) => {\n        if (newStyle[key] === undefined) {\n            diff[key] = null;\n        }\n    });\n    Object.keys(newStyle).forEach((key) => {\n        const value = newStyle[key];\n        const oldValue = oldStyle[key];\n        if (isAnimated(value)) {\n            // do nothing\n            return;\n        }\n        if (oldValue !== value &&\n            JSON.stringify(oldValue) !== JSON.stringify(value)) {\n            // I'd use deep equal here but that'd take additional work and this was easier\n            diff[key] = value;\n        }\n    });\n    return diff;\n}\nexport function getStyleWithoutAnimations(newStyle) {\n    'worklet';\n    const diff = {};\n    for (const key in newStyle) {\n        const value = newStyle[key];\n        if (isAnimated(value)) {\n            continue;\n        }\n        diff[key] = value;\n    }\n    return diff;\n}\nexport const validateAnimatedStyles = (styles) => {\n    'worklet';\n    if (typeof styles !== 'object') {\n        throw new Error(`useAnimatedStyle has to return an object, found ${typeof styles} instead`);\n    }\n    else if (Array.isArray(styles)) {\n        throw new Error('useAnimatedStyle has to return an object and cannot return static styles combined with dynamic ones. Please do merging where a component receives props.');\n    }\n};\n"]},"metadata":{},"sourceType":"module"}